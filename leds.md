# Управление светодиодами на плате Orange Pi3 LTS

В данной статье настраивается поведение красного и зелёного светодиодов, размещённых непосредственно на плате SBC.

## GPIO светодиодов и конфигурация по умолчанию

| Имя на схеме | Цвет  | GPIO | trigger | brightness|
|--------------|-------|:----:|---------|:---------:|
| PWR-LED      | RED   | PL4  | none    | 0         |
| STATUS-LED   | GREEN | PL7  | none    | 1         |

Конфигурация по умолчанию приведена для Armbian 22.08.8 и ядра Linux 5.15.74-sunxi64

Кроме того, конфигурация сохраняется между перезапусками и восстанавливается в файле ```/etc/armbian-leds.conf```.
Сохранение и восстановление реализовано сервисом systemd ```armbian-led-state.service```.
Сохраняется состояние светодиода (brightnes 0/1) и название события, меняющего автоматически состояние светодиода.

Задать триггер 
$ echo "1" | sudo tee /sys/class/leds/green-led/brightness


Состояние светодиода можно поменять командой
```console
$ echo "0" | sudo tee /sys/class/leds/green-led/brightness
$ echo "1" | sudo tee /sys/class/leds/green-led/brightness
```

Полный список триггеров можно получить командой 
```console
$ cat /sys/class/leds/green-led/trigger
```

На момент написания статьи в Armbian не предусмотрено только восстановления состояния из файла ```/etc/armbian-leds.conf```,
автосохранение же может запутывать пользователя, если события/триггеры не используются, а состояние модифицируется иным способом, например, из скриптов.

В таком случае предлагается
